# This is an example file. Create secret-backend.yaml with actual values
# Use: kubectl create secret generic backend-secrets --from-env-file=.env --dry-run=client -o yaml > secret-backend.yaml
# Or use: kubectl create secret generic backend-secrets --from-literal=KEY=value -n foundry-idp

apiVersion: v1
kind: Secret
metadata:
  name: backend-secrets
  namespace: foundry-idp
type: Opaque
stringData:
  # Database
  DATABASE_URL: "postgresql://user:password@postgres-service:5432/foundry_idp"
  
  # Security
  SECRET_KEY: "your-secret-key-here-change-in-production"
  ALGORITHM: "HS256"
  ACCESS_TOKEN_EXPIRE_MINUTES: "15"
  REFRESH_TOKEN_EXPIRE_DAYS: "7"
  
  # Admin credentials
  ADMIN_EMAIL: "admin@foundry-idp.com"
  ADMIN_USERNAME: "admin"
  ADMIN_PASSWORD: "change-this-password"
  
  # Encryption
  ENCRYPTION_KEY: "your-encryption-key-here"
  PULUMI_CONFIG_PASSPHRASE: "your-pulumi-passphrase"
  
  # Pulumi Cloud Configuration
  # When PULUMI_ACCESS_TOKEN is set, Pulumi will use Pulumi Cloud as backend
  PULUMI_ACCESS_TOKEN: ""
  PULUMI_ORG: ""  # Your Pulumi organization name (e.g., "your-org")
  
  # Pulumi ESC (Environments, Secrets, and Configuration) Configuration
  # ESC environments automatically handle OIDC token exchange for cloud credentials
  # Format: "org/environment-name" (e.g., "your-org/gcp-production")
  PULUMI_ESC_ENVIRONMENT_GCP: ""  # ESC environment for GCP (e.g., "your-org/gcp-production")
  PULUMI_ESC_ENVIRONMENT_AWS: ""  # ESC environment for AWS (e.g., "your-org/aws-production")
  PULUMI_ESC_ENVIRONMENT_AZURE: ""  # ESC environment for Azure (e.g., "your-org/azure-production")
  PULUMI_USE_ESC: "true"  # Use ESC for credential management (required)
  
  # GitHub Configuration
  GITHUB_REPOSITORY: "https://github.com/your-org/your-repo"
  GITHUB_TOKEN: "your-github-token"
  GITHUB_WEBHOOK_SECRET: "your-webhook-secret"
  WEBHOOK_BASE_URL: "https://foundry-idp.com"
  GITHUB_TEMPLATE_REPO_URL: "https://github.com/your-org/idp-templates.git"
  MICROSERVICE_REPO_ORG: ""
  
  # AWS Configuration (for cost services and other operations)
  AWS_REGION: "us-east-1"
  
  # GCP Configuration (for cost services and other operations)
  GCP_PROJECT_ID: ""
  GCP_BILLING_ACCOUNT_ID: ""
  
  # CORS Configuration
  CORS_ORIGINS: "https://foundry-idp.com,https://www.foundry-idp.com,http://localhost:3000"
  

  
